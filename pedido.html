<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hacer Pedido - Fratelli Pazzi</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Open+Sans:wght@400;600&display=swap">
  <style>
    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0; 
    }
    
    body { 
      font-family: 'Open Sans', sans-serif; 
      background: linear-gradient(135deg, #fefefe 0%, #f8f9fa 100%);
      color: #333; 
      line-height: 1.6; 
      overflow-x: hidden;
    }
    
    header { 
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      padding: 30px 20px; 
      text-align: center; 
      border-bottom: 1px solid #eee; 
      position: sticky; 
      top: 0; 
      z-index: 100; 
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    header h1 { 
      font-family: 'Playfair Display', serif; 
      font-size: 42px; 
      color: #d62828; 
      text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 15px;
    }
    
    nav { 
      margin-top: 10px; 
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
    }
    
    nav a { 
      color: #d62828; 
      padding: 10px 20px;
      text-decoration: none; 
      font-weight: 600; 
      border-radius: 8px;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    nav a::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #d62828 0%, #c11e1e 100%);
      transition: left 0.3s ease;
      z-index: -1;
    }
    
    nav a:hover::before {
      left: 0;
    }
    
    nav a:hover {
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(214, 40, 40, 0.3);
    }
    
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 40px 20px;
    }
    
    .carrito-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 50px;
      padding: 30px 40px;
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.15);
      position: relative;
      overflow: hidden;
    }
    
    .carrito-header::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(214, 40, 40, 0.05) 0%, transparent 50%);
      animation: rotate 20s linear infinite;
    }
    
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .carrito-info {
      display: flex;
      align-items: center;
      gap: 30px;
      position: relative;
      z-index: 2;
    }
    
    .carrito-info h2 {
      font-family: 'Playfair Display', serif;
      color: #d62828;
      font-size: 32px;
      margin: 0;
    }
    
    .total-display {
      background: linear-gradient(135deg, #d62828 0%, #c11e1e 100%);
      color: white;
      padding: 15px 25px;
      border-radius: 15px;
      font-size: 20px;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(214, 40, 40, 0.3);
    }
    
    .carrito-btn {
      background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
      color: white;
      border: none;
      padding: 18px 35px;
      border-radius: 15px;
      font-weight: 600;
      font-size: 18px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      z-index: 2;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    
    .carrito-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    
    #contador-carrito {
      background: #ff4757;
      color: white;
      border-radius: 50%;
      padding: 6px 12px;
      font-size: 14px;
      font-weight: bold;
      position: absolute;
      top: -10px;
      right: -10px;
      min-width: 25px;
      text-align: center;
      border: 3px solid white;
    }
    
    .categorias {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 50px;
      flex-wrap: wrap;
    }
    
    .categoria-btn {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      border: 3px solid #d62828;
      color: #d62828;
      padding: 15px 30px;
      border-radius: 25px;
      cursor: pointer;
      font-weight: 600;
      font-size: 16px;
      transition: all 0.4s ease;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      position: relative;
      overflow: hidden;
    }
    
    .categoria-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #d62828 0%, #c11e1e 100%);
      transition: left 0.4s ease;
      z-index: -1;
    }
    
    .categoria-btn:hover::before,
    .categoria-btn.active::before {
      left: 0;
    }
    
    .categoria-btn:hover,
    .categoria-btn.active {
      color: white;
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(214, 40, 40, 0.4);
    }
    
    .productos-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
      margin-bottom: 60px;
    }
    
    .producto-card {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      transition: all 0.5s ease;
      border: 1px solid #e9ecef;
      position: relative;
      transform-style: preserve-3d;
    }
    
    .producto-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.5s ease;
      z-index: 1;
    }
    
    .producto-card:hover::before {
      left: 100%;
    }
    
    .producto-card:hover {
      transform: translateY(-15px) rotateX(5deg);
      box-shadow: 0 25px 50px rgba(0,0,0,0.25);
    }
    
    .producto-card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }
    
    .producto-card:hover img {
      transform: scale(1.05);
    }
    
    .producto-info {
      padding: 30px 25px;
      text-align: center;
      position: relative;
      z-index: 2;
    }
    
    .producto-nombre {
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      color: #111;
      margin-bottom: 12px;
      font-weight: 700;
      line-height: 1.3;
    }
    
    .producto-precio {
      color: #d62828;
      font-size: 22px;
      font-weight: 600;
      margin-bottom: 20px;
    }
    
    .boton-agregar {
      background: linear-gradient(135deg, #d62828 0%, #c11e1e 100%);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      box-shadow: 0 4px 15px rgba(214, 40, 40, 0.3);
    }
    
    .boton-agregar:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(214, 40, 40, 0.5);
    }
    
    .boton-agregar:active {
      transform: translateY(-1px);
    }
    
    /* Modal del carrito */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      backdrop-filter: blur(5px);
    }
    
    .modal-contenido {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      margin: 3% auto;
      padding: 40px;
      border-radius: 25px;
      width: 90%;
      max-width: 700px;
      max-height: 85vh;
      overflow-y: auto;
      position: relative;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      animation: modalAppear 0.4s ease-out;
    }
    
    @keyframes modalAppear {
      from {
        opacity: 0;
        transform: translateY(-50px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    
    .cerrar {
      color: #999;
      float: right;
      font-size: 32px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      right: 25px;
      top: 20px;
      transition: all 0.3s ease;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255,255,255,0.8);
    }
    
    .cerrar:hover {
      color: #d62828;
      background: rgba(214, 40, 40, 0.1);
      transform: rotate(90deg);
    }
    
    .modal h2 {
      color: #d62828;
      margin-bottom: 30px;
      font-family: 'Playfair Display', serif;
      font-size: 32px;
      text-align: center;
    }
    
    .carrito-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px;
      margin-bottom: 15px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      transition: all 0.3s ease;
      border-left: 4px solid #d62828;
    }
    
    .carrito-item:hover {
      transform: translateX(5px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.12);
    }
    
    .item-info {
      flex: 1;
    }
    
    .item-nombre {
      font-weight: 600;
      font-size: 18px;
      color: #333;
      margin-bottom: 5px;
    }
    
    .item-precio {
      color: #d62828;
      font-size: 16px;
      font-weight: 600;
    }
    
    .btn-eliminar {
      background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
      box-shadow: 0 3px 10px rgba(220, 53, 69, 0.3);
    }
    
    .btn-eliminar:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(220, 53, 69, 0.4);
    }
    
    .carrito-total {
      margin-top: 30px;
      padding-top: 25px;
      border-top: 3px solid #d62828;
      text-align: center;
      background: linear-gradient(135deg, #d62828 0%, #c11e1e 100%);
      color: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 6px 20px rgba(214, 40, 40, 0.3);
    }
    
    .total-texto {
      font-size: 24px;
      font-weight: 700;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
    }
    
    .btn-pagar {
      background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      color: white;
      border: none;
      padding: 15px 40px;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
    }
    
    .btn-pagar:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(40, 167, 69, 0.4);
    }
    
    .carrito-vacio {
      text-align: center;
      padding: 60px 20px;
      color: #666;
      font-size: 18px;
    }
    
    .carrito-vacio-icon {
      font-size: 64px;
      margin-bottom: 20px;
      opacity: 0.5;
    }
    
    /* Responsive */
    @media (max-width: 768px) {
      .container {
        padding: 20px 15px;
      }
      
      header h1 {
        font-size: 32px;
      }
      
      .carrito-header {
        flex-direction: column;
        gap: 20px;
        padding: 25px 20px;
      }
      
      .carrito-info {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }
      
      .carrito-info h2 {
        font-size: 28px;
      }
      
      .productos-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
      }
      
      .categorias {
        gap: 10px;
      }
      
      .categoria-btn {
        padding: 12px 20px;
        font-size: 14px;
      }
      
      .modal-contenido {
        margin: 5% auto;
        padding: 25px;
        width: 95%;
      }
      
      .modal h2 {
        font-size: 26px;
      }
      
      .carrito-item {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
      
      .btn-eliminar {
        align-self: flex-end;
      }
    }
  </style>
</head>
<body>
  <header>
    <h1>Fratelli Pazzi</h1>
    <nav>
      <a href="index.html">🏠 Inicio</a>
      <a href="index.html#ofertas">🔥 Ofertas</a>
      <a href="index.html#nuestras-pizzas">🍕 Pizzas</a>
      <a href="index.html#calzones">🌯 Calzones</a>
      <a href="index.html#contacto">📞 Contacto</a>
    </nav>
  </header>

  <div class="container">
    <div class="carrito-header">
      <div class="carrito-info">
        <h2>🛒 Hacer Pedido</h2>
        <div class="total-display">
          Total: <span id="total-carrito">0.00€</span>
        </div>
      </div>
      <button class="carrito-btn" onclick="mostrarCarrito()">
        🛒 Ver Carrito
        <span id="contador-carrito" style="display: none;">0</span>
      </button>
    </div>

    <div class="categorias">
      <button class="categoria-btn active" onclick="mostrarCategoria('pizzas')">🍕 Pizzas</button>
      <button class="categoria-btn" onclick="mostrarCategoria('calzones')">🌯 Calzones</button>
      <button class="categoria-btn" onclick="mostrarCategoria('bebidas')">🥤 Bebidas</button>
      <button class="categoria-btn" onclick="mostrarCategoria('helados')">🍦 Helados</button>
    </div>

    <div id="productos-container" class="productos-grid">
      <!-- Los productos se cargarán aquí dinámicamente -->
    </div>
  </div>

  <!-- Modal del carrito -->
  <div id="carrito-modal" class="modal">
    <div class="modal-contenido">
      <span class="cerrar" onclick="cerrarCarrito()">&times;</span>
      <h2>🛒 Tu Carrito</h2>
      <div id="carrito-contenido">
        <!-- El contenido del carrito se cargará aquí -->
      </div>
    </div>
  </div>

  <script>
    let carrito = [];
    let categoriaActual = 'pizzas';

    const productos = {
      pizzas: [
        { nombre: 'Margarita', precio: '10.00', imagen: 'images/Margarita.png' },
        { nombre: 'Prosciutto', precio: '12.00', imagen: 'images/Prosciutto.png' },
        { nombre: 'Cuatro Formaggi', precio: '12.00', imagen: 'images/Quatro formaggi.png' },
        { nombre: 'Capricciosa', precio: '12.00', imagen: 'images/Capriciossa.png' },
        { nombre: 'Leonardo Da Vinci', precio: '14.00', imagen: 'images/LeonardoDaVinci.png' },
        { nombre: 'Salchicha y Friarielli', precio: '12.00', imagen: 'images/SalchichaFriarielli.png' },
        { nombre: 'Vegetariana', precio: '12.00', imagen: 'images/Calzone Vegetariano.png' },
        { nombre: 'Focaccia', precio: '5.00', imagen: 'images/Focaccia.png' }
      ],
      calzones: [
        { nombre: 'Calzone Tradizionale', precio: '12.00', imagen: 'images/Calzone Traditionale.png' },
        { nombre: 'Calzone Pepperoni', precio: '12.00', imagen: 'images/Calzone Pepperoni.png' },
        { nombre: 'Calzone Vegetariano', precio: '12.00', imagen: 'images/Calzone Vegetariano.png' }
      ],
      bebidas: [
        { nombre: 'Coca Cola', precio: '2.50', imagen: 'images/coca-cola.jpg' },
        { nombre: 'Fanta Naranja', precio: '2.50', imagen: 'images/fanta.jpg' },
        { nombre: 'Sprite', precio: '2.50', imagen: 'images/sprite.jpg' },
        { nombre: 'Agua Mineral', precio: '1.50', imagen: 'images/agua.jpg' },
        { nombre: 'Cerveza Moretti', precio: '3.00', imagen: 'images/moretti.jpg' },
        { nombre: 'Vino Tinto', precio: '15.00', imagen: 'images/vino-tinto.jpg' }
      ],
      helados: [
        { nombre: 'Helado de Vainilla', precio: '3.50', imagen: 'images/helado-vainilla.jpg' },
        { nombre: 'Helado de Chocolate', precio: '3.50', imagen: 'images/helado-chocolate.jpg' },
        { nombre: 'Helado de Fresa', precio: '3.50', imagen: 'images/helado-fresa.jpg' },
        { nombre: 'Helado de Pistacho', precio: '4.00', imagen: 'images/helado-pistacho.jpg' },
        { nombre: 'Gelato Stracciatella', precio: '4.50', imagen: 'images/gelato-stracciatella.jpg' },
        { nombre: 'Gelato Tiramisu', precio: '4.50', imagen: 'images/gelato-tiramisu.jpg' }
      ]
    };

    function agregarAlCarrito(nombre, precio, boton) {
      carrito.push({ nombre: nombre, precio: precio });
      actualizarContadorCarrito();
      actualizarTotalCarrito();
      
      // Feedback visual
      const originalText = boton.textContent;
      const originalBg = boton.style.background;
      
      boton.style.background = '#28a745';
      boton.textContent = '✓ Añadido';
      
      setTimeout(() => {
        boton.style.background = originalBg;
        boton.textContent = originalText;
      }, 1000);
    }

    function actualizarContadorCarrito() {
      const contador = document.getElementById('contador-carrito');
      if (contador) {
        contador.textContent = carrito.length;
        contador.style.display = carrito.length > 0 ? 'inline' : 'none';
      }
    }

    function actualizarTotalCarrito() {
      const totalElement = document.getElementById('total-carrito');
      if (totalElement) {
        const total = carrito.reduce((sum, item) => sum + parseFloat(item.precio), 0);
        totalElement.textContent = total.toFixed(2) + '€';
      }
    }

    function mostrarCategoria(categoria) {
      categoriaActual = categoria;
      
      // Actualizar botones de categoría
      document.querySelectorAll('.categoria-btn').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      // Mostrar productos
      mostrarProductos();
    }

    function mostrarProductos() {
      const container = document.getElementById('productos-container');
      container.innerHTML = '';
      
      const productosCategoria = productos[categoriaActual];
      productosCategoria.forEach(item => {
        const card = document.createElement('div');
        card.className = 'producto-card';
        
        const img = document.createElement('img');
        img.src = item.imagen;
        img.alt = item.nombre;
        img.loading = 'lazy';
        
        const info = document.createElement('div');
        info.className = 'producto-info';
        
        const nombre = document.createElement('div');
        nombre.className = 'producto-nombre';
        nombre.textContent = item.nombre;
        
        const precio = document.createElement('div');
        precio.className = 'producto-precio';
        precio.textContent = item.precio + '€';
        
        const botonAgregar = document.createElement('button');
        botonAgregar.textContent = 'Añadir al carrito';
        botonAgregar.className = 'boton-agregar';
        botonAgregar.onclick = function() {
          agregarAlCarrito(item.nombre, item.precio, botonAgregar);
        };
        
        info.appendChild(nombre);
        info.appendChild(precio);
        info.appendChild(botonAgregar);
        
        card.appendChild(img);
        card.appendChild(info);
        
        container.appendChild(card);
      });
    }

    function mostrarCarrito() {
      const modal = document.getElementById('carrito-modal');
      const contenido = document.getElementById('carrito-contenido');
      
      contenido.innerHTML = '';
      
      if (carrito.length === 0) {
        contenido.innerHTML = `
          <div class="carrito-vacio">
            <div class="carrito-vacio-icon">🛒</div>
            <p>Tu carrito está vacío</p>
            <p style="font-size: 14px; margin-top: 10px; opacity: 0.7;">Añade algunos productos deliciosos</p>
          </div>
        `;
      } else {
        carrito.forEach((item, index) => {
          const itemDiv = document.createElement('div');
          itemDiv.className = 'carrito-item';
          
          const infoDiv = document.createElement('div');
          infoDiv.className = 'item-info';
          infoDiv.innerHTML = `
            <div class="item-nombre">${item.nombre}</div>
            <div class="item-precio">${item.precio}€</div>
          `;
          
          const btnEliminar = document.createElement('button');
          btnEliminar.textContent = 'Eliminar';
          btnEliminar.className = 'btn-eliminar';
          
          // Aplicar la solución que funcionó
          btnEliminar.onclick = (function(idx) {
            return function() {
              eliminarDelCarrito(idx);
            };
          })(index);
          
          itemDiv.appendChild(infoDiv);
          itemDiv.appendChild(btnEliminar);
          contenido.appendChild(itemDiv);
        });
        
        // Agregar total y botón de pagar
        const total = carrito.reduce((sum, item) => sum + parseFloat(item.precio), 0);
        const totalDiv = document.createElement('div');
        totalDiv.className = 'carrito-total';
        totalDiv.innerHTML = `
          <div class="total-texto">Total: ${total.toFixed(2)}€</div>
          <button class="btn-pagar" onclick="irAPagar()">💳 Ir a Pagar</button>
        `;
        contenido.appendChild(totalDiv);
      }
      
      modal.style.display = 'block';
    }

    function eliminarDelCarrito(index) {
      carrito.splice(index, 1);
      actualizarContadorCarrito();
      actualizarTotalCarrito();
      mostrarCarrito(); // Recargar el carrito
    }

    function cerrarCarrito() {
      document.getElementById('carrito-modal').style.display = 'none';
    }

    function irAPagar() {
      if (carrito.length === 0) {
        alert('Tu carrito está vacío');
        return;
      }
      
      // Aquí iría la pasarela de pago
      alert('Redirigiendo a la pasarela de pago...\n\nTotal: ' + carrito.reduce((sum, item) => sum + parseFloat(item.precio), 0).toFixed(2) + '€');
    }

    // Inicializar la página
    document.addEventListener('DOMContentLoaded', () => {
      mostrarProductos();
    });

    // Cerrar modal al hacer clic fuera
    window.onclick = function(event) {
      const modal = document.getElementById('carrito-modal');
      if (event.target === modal) {
        cerrarCarrito();
      }
    };
  </script>
</body>
</html>
