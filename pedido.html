<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <title>Fratelli Pazzi - Pedido</title>
  <link rel="stylesheet" href="css/pedido.css">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
  <ol id="progress" class="flex justify-between p-4 bg-white shadow">
    <li>Carrito</li>
    <li>Entrega</li>
    <li>Pago</li>
  </ol>
  <div class="hidden">
    <svg id="icon-spicy" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"> <path d="M12 2c2 2 4 3 4 6a4 4 0 01-3 4v4h-2v-4a4 4 0 01-3-4c0-3 2-4 4-6z"/></svg>
    <svg id="icon-veggie" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"> <path d="M12 2c-4 0-7 2-10 6 4 2 7 5 10 10 3-5 6-8 10-10-3-4-6-6-10-6z"/></svg>
    <svg id="icon-gluten" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"> <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/><line x1="5" y1="19" x2="19" y2="5" stroke="currentColor" stroke-width="2"/></svg>
    <svg id="icon-star" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"> <path d="M12 .6l3.7 7.4 8.2 1.2-6 5.8 1.4 8.2L12 18.9l-7.3 4.3 1.4-8.2-6-5.8 8.2-1.2z"/></svg>
  </div>

  <main class="flex-1 p-4 space-y-6">
    <section id="step-1" data-step class="space-y-4">
      <div id="menu" class="grid grid-cols-2 md:grid-cols-4 gap-4"></div>
      <div id="cross-sell" class="hidden p-4 bg-yellow-100 rounded">
        <p class="mb-2">Añade bebida + helado y ahorra 1 €</p>
        <button id="add-combo" class="btn-primary">Añadir combo</button>
      </div>
      <ul id="cart-items" class="mt-4"></ul>
      <button class="next-step btn-primary mt-4">Continuar</button>
    </section>

    <section id="step-2" data-step class="hidden space-y-4">
      <form id="form-entrega" class="space-y-2" aria-label="Datos de entrega">
        <input type="text" required placeholder="Nombre" class="focus-ring w-full p-2 border rounded">
        <input type="tel" required placeholder="Teléfono" class="focus-ring w-full p-2 border rounded">
        <input type="text" required placeholder="Dirección" class="focus-ring w-full p-2 border rounded">
      </form>
      <div class="flex justify-between">
        <button class="prev-step btn-primary bg-gray-200 text-black hover:bg-gray-300">Atrás</button>
        <button class="next-step btn-primary">Continuar</button>
      </div>
    </section>

    <section id="step-3" data-step class="hidden space-y-4">
      <div role="radiogroup" aria-label="Método de pago" class="space-y-2">
        <label class="flex items-center"><input type="radio" name="pago" value="Efectivo" class="mr-2" checked> Efectivo</label>
        <label class="flex items-center"><input type="radio" name="pago" value="Tarjeta" class="mr-2"> Tarjeta</label>
        <label class="flex items-center"><input type="radio" name="pago" value="Bizum" class="mr-2"> Bizum</label>
      </div>
      <div class="flex justify-between">
        <button class="prev-step btn-primary bg-gray-200 text-black hover:bg-gray-300">Atrás</button>
        <button id="pay-btn" class="btn-primary">Pagar</button>
      </div>
    </section>
  </main>

  <!-- Pizza modal -->
  <div id="pizza-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden">
    <div class="bg-white p-4 rounded w-11/12 max-w-md" id="pizza-modal-content"></div>
    <button id="modal-close" class="absolute top-4 right-4 text-white text-2xl">×</button>
  </div>

  <!-- Sticky cart -->
  <div class="fixed bottom-0 left-0 right-0 bg-white shadow-lg p-4 flex justify-between items-center">
    <span id="cart-total">0€</span>
    <div class="relative">
      <button id="checkout-btn" class="btn-primary">Finalizar pedido</button>
      <span id="cart-badge" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full px-2 hidden">0</span>
    </div>
  </div>

  <script src="js/pedido.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=[YOUR_GA4_ID]"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '[YOUR_GA4_ID]');
  </script>
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '[YOUR_PIXEL_ID]');
  </script>
  <script src="https://www.google.com/recaptcha/api.js?render=[YOUR_RECAPTCHA_SITE_KEY]"></script>
</body>
</html>
